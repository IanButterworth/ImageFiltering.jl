<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Max min filters · ImageFiltering</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">ImageFiltering</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">ImageFiltering.jl</a></li><li><a class="tocitem" href="../../">Examples</a></li><li><a class="tocitem" href="../../../function_reference/">Function reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Max min filters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Max min filters</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaImages/ImageFiltering.jl/blob/master/docs/demos/filters/min_max_filter.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Max-min-filters"><a class="docs-heading-anchor" href="#Max-min-filters">Max min filters</a><a id="Max-min-filters-1"></a><a class="docs-heading-anchor-permalink" href="#Max-min-filters" title="Permalink"></a></h1><p><a href="../min_max_filter.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-Deeptendu%20Santra-blue" alt="Author"/> <img src="https://img.shields.io/date/1602115200" alt="Update time"/></p><p>In this tutorial we see how can we can effectively use max and min filter to distinguish between smooth and texture edges  in grayscale images.</p><p>We will use the <a href="../../../function_reference/#ImageFiltering.MapWindow.mapwindow"><code>mapwindow</code></a> function in <code>ImageFiltering.jl</code> which provides a general functionality to apply any function to the window around each pixel.</p><pre><code class="language- hljs">using ImageCore, ImageShow, ImageFiltering
using TestImages

img = Gray.(testimage(&quot;house&quot;);)      # Original Image</code></pre><p>We can use the <code>minimum</code> function to compute the minimum of the grayscale values in the given matrix or array. For example:</p><pre><code class="language-julia hljs">minimum([Gray(0.7),Gray(0.5),Gray(0.0)]) # Should return Gray(0.0) i.e black.</code></pre><img src='data:image/svg+xml;utf-8,<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="25mm" height="25mm" viewBox="0 0 1 1">
    <rect width="1" height="1" fill="%23000000" stroke="none"/>
</svg>
'/><pre><code class="language- hljs">filter_size = (15, 15)
# Using the `mapwindow` function, we create an image of the local minimum.
# `mapwindow` maps the given function over a moving window of given size.
img_min = mapwindow(minimum, img, filter_size)
# Similarly for maximum
img_max = mapwindow(maximum, img, filter_size)
# The max(min) filter
img_max_min = mapwindow(maximum, img_min, filter_size)
# The min(max) filter
img_min_max = mapwindow(minimum, img_max, filter_size)
mosaicview(img_min, img_max, img_max_min, img_min_max; nrow=1)</code></pre><p>Now that we are done with the basic filtered images, we proceed to the next part which is edge detection using these filters.</p><p>For edge detection, we need to define thresholds for our image. The threshold is an important tool to binarize a grayscale image. The threshold value for a given pixel practically decides if the pixel visible or not in the output image. However, appyling a global threshold might not consider the variation of colors/brightness within the image. Thus we consider an adaptive type theresholding method here using max/min results.</p><p>The max(min) and min(max) filter effectively follows the smooth edges of the image. Therefore, their average also follows the smooth parts of the image. If we use this image as a threshold for the original image, the smooth parts of the original image will get filtered out, leaving only the texture and/or noise behind. So we can use the average of <code>img_max_min</code> and <code>img_min_max</code> as the texture threshold.</p><p>The average of min and max filters also gives us the smooth edges, but it also includes the noise in the image. So using average of <code>img_min</code> and <code>img_max</code> as a threshold will yeild only texture.</p><pre><code class="language- hljs">img_texture_noise_threshold = (img_max_min + img_max_min) ./ 2
img_texture_threshold = (img_max + img_min) ./ 2
mosaicview(img_texture_noise_threshold, img_texture_threshold; nrow=1)</code></pre><pre><code class="language- hljs"># The Dynamic Gist is obtained by subtracting the img_texture_threshold from the original image.
# The filtered image gives us the texture of the image.
img_dynamic_gist = img - img_texture_threshold
# The Texture Gist is obtained by subtracting img_texture_noise_threshold from the original image.
# The filtered image gives us the texture along with the noise of the image.
img_texture_gist = img - img_texture_noise_threshold
mosaicview(img_dynamic_gist, img_texture_gist; nrow=1)</code></pre><pre><code class="language- hljs"># We extract out the smooth/ramp parts of the image.
# The darker section of the image consist of the ramp edges. The brighter pixels are mostly noise.
ramp = img_dynamic_gist - img_texture_gist
# Filtered-out edges
edge = img_max - img_min
# Smoothed-out version of edge
edge_smoothed = img_min_max - img_max_min
mosaicview(img, ramp, edge, edge_smoothed; nrow=2)</code></pre><h1 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h1><p>Verbeek, P. W., Vrooman, H. A., &amp; Van Vliet, L. J. (1988). <a href="https://core.ac.uk/download/pdf/194053536.pdf">Low-level image processing by max-min filters</a>. Signal Processing, 15(3), 249-258.</p><hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Saturday 30 October 2021 06:35">Saturday 30 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
